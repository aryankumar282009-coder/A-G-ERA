<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A&G ERA</title>

<style>
body{font-family:Arial;margin:0;background:#f5f5f5}

/* HEADER */
header{background:black;color:white;padding:15px}
.header-top{display:flex;gap:10px;align-items:center;justify-content:center;flex-wrap:wrap}
header input{padding:8px;width:200px;border-radius:5px;border:none}

/* NAV */
nav{display:flex;justify-content:center;gap:20px;background:#1a1a1a;padding:10px}
nav a{color:white;text-decoration:none;font-weight:bold}

/* PRODUCTS */
.products{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;padding:30px}
.card{background:white;padding:15px;border-radius:10px;text-align:center;box-shadow:0 4px 8px rgba(0,0,0,0.1)}
.card img{width:100%;height:220px;object-fit:cover;border-radius:5px}

/* BUTTONS */
.actions{display:flex;gap:8px;justify-content:center;margin-top:10px}
.actions button{padding:8px;border:none;border-radius:5px;cursor:pointer;font-weight:bold}
.cart{background:black;color:white}
.buy{background:orange}
.wish{background:#eee}

/* ADMIN */
.admin{position:fixed;bottom:20px;right:20px;padding:15px;border-radius:50%;background:black;color:white;cursor:pointer}
#panel{display:none;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:white;padding:20px;border:2px solid #000;max-width:400px;box-shadow:0 0 20px rgba(0,0,0,0.5)}
input,select{width:100%;padding:10px;margin:8px 0}
button{padding:10px;width:100%}
</style>
</head>

<body>

<header>
  <div class="header-top">
    <h2>A&G ERA</h2>
    <input type="text" id="search" placeholder="Search products..." onkeyup="filterProducts()">
    <input type="text" placeholder="Delivery Pincode">
  </div>
</header>

<nav>
<a href="#" onclick="setFilter('all')">Home</a>
<a href="#" onclick="setFilter('Men')">Men's</a>
<a href="#" onclick="setFilter('Women')">Women's</a>
</nav>

<div class="products" id="productList"></div>

<button class="admin" onclick="panel.style.display='block'">üîí</button>

<div id="panel">
<h2>Owner Dashboard</h2>
<select id="category">
<option value="Men">Men</option>
<option value="Women">Women</option>
</select>
<input id="name" placeholder="Product Name">
<input id="price" placeholder="Price">
<select id="size">
<option>S</option><option>M</option><option>L</option><option>XL</option>
</select>
<input type="file" id="img">
<button onclick="addProduct()">Add Product</button>
<button onclick="panel.style.display='none'">Close</button>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyAh6-HK90YwIjWI5lAXJ7fUd2kP0o-33d4",
  authDomain: "aryan-8efc1.firebaseapp.com",
  projectId: "aryan-8efc1",
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

let allProducts = [];
let activeFilter = "all";

window.loadProducts = async () => {
  const snap = await getDocs(collection(db,"products"));
  allProducts = [];
  snap.forEach(d=>allProducts.push(d.data()));
  render(allProducts);
};

function render(list){
  const box = document.getElementById("productList");
  box.innerHTML="";
  list.forEach(p=>{
    box.innerHTML+=`
    <div class="card">
      <img src="${p.image}">
      <h3>${p.name}</h3>
      <p>‚Çπ${p.price}</p>
      <p>‚≠ê 4.3</p>
      <p>Size: ${p.size}</p>
      <div class="actions">
        <button class="wish">‚ù§Ô∏è</button>
        <button class="cart" onclick="alert('Added to cart')">Add</button>
        <button class="buy" onclick="alert('Checkout coming soon')">Buy</button>
      </div>
    </div>`;
  });
}

window.filterProducts = ()=>{
  const q = search.value.toLowerCase();
  render(allProducts.filter(p=>p.name.toLowerCase().includes(q)));
}

window.setFilter = c=>{
  activeFilter=c;
  render(c==="all"?allProducts:allProducts.filter(p=>p.category===c));
}

window.addProduct = ()=>{
  const reader=new FileReader();
  reader.onload=async e=>{
    await addDoc(collection(db,"products"),{
      name:name.value,price:price.value,size:size.value,
      category:category.value,image:e.target.result
    });
    panel.style.display="none";
    loadProducts();
  }
  reader.readAsDataURL(img.files[0]);
}

loadProducts();
</script>

</body>
</html>
