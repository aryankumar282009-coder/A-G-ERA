<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A&G ERA</title>
<style>
body{font-family:Arial;margin:0;background:#f5f5f5}
header{background:black;color:white;text-align:center;padding:20px}
nav{display:flex;justify-content:center;gap:20px;background:#1a1a1a;padding:10px}
nav a{color:white;text-decoration:none;font-weight:bold;text-transform:uppercase}
.products{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;padding:30px}
.card{background:white;padding:15px;border-radius:10px;text-align:center;box-shadow:0 4px 8px rgba(0,0,0,0.1)}
.card img{width:100%;height:200px;object-fit:cover;border-radius:5px}
.admin{position:fixed;bottom:20px;right:20px;padding:15px;border-radius:50%;background:black;color:white;cursor:pointer}
#panel{display:none;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:white;padding:20px;border:2px solid #000;max-width:400px;box-shadow:0 0 20px rgba(0,0,0,0.5)}
input,select{width:100%;padding:10px;margin:8px 0;box-sizing:border-box}
button{padding:10px;margin-top:10px;width:100%;cursor:pointer;font-weight:bold}
</style>
</head>
<body>

<header><h1>A&G ERA</h1></header>
<nav>
<a href="#">Home</a>
<a href="#">Men's</a>
<a href="#">Women's</a>
</nav>

<div class="products" id="productList"></div>

<button class="admin" onclick="panel.style.display='block'">ðŸ”’</button>

<div id="panel">
<h2>Owner Dashboard</h2>
<select id="category" onchange="size.style.display=this.value==='clothes'?'block':'none'">
<option value="clothes">Clothes</option>
<option value="accessories">Accessories</option>
</select>
<input type="text" id="name" placeholder="Product Name">
<input type="number" id="price" placeholder="Price">
<select id="size">
<option>S</option><option>M</option><option>L</option><option>XL</option>
</select>
<input type="file" id="img">
<button onclick="addProduct()">Add Product</button>
<button onclick="panel.style.display='none'" style="background:#ddd;color:black">Cancel / Close</button>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyAh6-HK90YwIjWI5lAXJ7fUd2kP0o-33d4",
  authDomain: "aryan-8efc1.firebaseapp.com",
  projectId: "aryan-8efc1",
  storageBucket: "aryan-8efc1.appspot.com",
  messagingSenderId: "13373570900",
  appId: "1:13373570900:web:4b2270307e5aabad5092c1",
  measurementId: "G-5GXZQCF5RK"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

window.loadProducts = async function() {
    const snap = await getDocs(collection(db,"products"));
    const box = document.getElementById("productList");
    box.innerHTML = "";
    snap.forEach(doc=>{
        const p = doc.data();
        box.innerHTML += `<div class="card">
            <img src="${p.image}">
            <h3>${p.name}</h3>
            <p>â‚¹${p.price}</p>
            ${p.size?`<p>Size: ${p.size}</p>`:""}
        </div>`;
    });
}

window.addProduct = function() {
    const cat = document.getElementById("category").value;
    const n = document.getElementById("name").value;
    const p = document.getElementById("price").value;
    const s = document.getElementById("size").value;
    const imgFile = document.getElementById("img").files[0];

    if(!n || !p){ alert("Fill name and price"); return; }
    if(!imgFile){ alert("Select image"); return; }

    const reader = new FileReader();
    reader.onload = async function(e){
        await addDoc(collection(db,"products"),{
            name:n, price:p, size:(cat==="clothes"?s:""), image:e.target.result
        });
        alert("Product Added!");
        panel.style.display="none";
        loadProducts();
    };
    reader.readAsDataURL(imgFile);
}

loadProducts();
</script>

</body>
</html>
